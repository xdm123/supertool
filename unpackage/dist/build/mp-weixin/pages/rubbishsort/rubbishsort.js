(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/rubbishsort/rubbishsort"],{3574:function(e,t,n){"use strict";var o=n("dbc8"),i=n.n(o);i.a},"3dfa":function(e,t,n){"use strict";(function(e){n("5f52");o(n("66fd"));var t=o(n("60c7"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"4bde":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62"),i=n("532d");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=e.getRecorderManager(),u={data:function(){return{rubbishName:"",hotsearch:[],yuyinstart:!1,openrecordSet:!0}},computed:r({},(0,o.mapState)(["requesturl","key"])),methods:r({},(0,o.mapMutations)([i.SET_RUBBISH_SEARCH,i.SET_FINAL_DATA,i.SET_SHIBIE_OBJ]),{getinputValue:function(e){this.rubbishName=e.detail.value},searchfn:function(){var t=this;if(""!=this.rubbishName){e.showLoading();var n=encodeURI(this.rubbishName);e.request({url:t.requesturl+"/txapi/lajifenlei/index?key="+t.key+"&word="+n,success:function(n){n.data.newslist?(e.hideLoading(),console.log(n),t.SET_RUBBISH_SEARCH(n.data.newslist),e.navigateTo({url:"./searchlist/searchlist"})):e.showToast({title:"未找到相关内容",icon:"loading"})}})}else e.showToast({title:"输入内容不能为空",icon:"none"})},getres:function(t){var n=this,o=t.currentTarget.dataset.name;e.request({url:this.requesturl+"/txapi/lajifenlei/index?key="+this.key+"&word="+o,success:function(t){n.SET_RUBBISH_SEARCH(t.data.newslist),e.navigateTo({url:"./searchlist/searchlist"})}})},knowledgemore:function(){e.navigateTo({url:"knowledge/knowledge"})},allhotsearch:function(){e.navigateTo({url:"allhotsearch/allhotsearch"})},getHotsearch:function(){e.showLoading({});var t=this;e.request({url:t.requesturl+"/txapi/hotlajifenlei/index?key="+t.key,success:function(n){e.hideLoading();var o=n.data.newslist.splice(0,10);t.hotsearch=o}})},imagesort:function(){console.log("图像识别分类");var t=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(n){e.showLoading({title:"图片识别中",mask:!0}),e.getFileSystemManager().readFile({filePath:n.tempFilePaths[0],encoding:"base64",success:function(n){console.log("data:image/png;base64,"+n.data);var o="data:image/png;base64,"+n.data;console.log(o),e.request({method:"POST",url:t.requesturl+"/txapi/imglajifenlei/index",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{key:t.key,img:o},success:function(n){console.log(n);var i=n.data.newslist[0],a={name:i.name,type:i.lajitype,imgurl:o,lajitip:i.lajitip};t.SET_SHIBIE_OBJ(a),e.hideLoading(),e.navigateTo({url:"shibiepage/shibiepage"})}})}})}})},openrecordSetting:function(){var t=this;e.authorize({scope:"scope.record",success:function(){t.openrecordSet=!1},fail:function(){e.showModal({title:"需授权录音功能",content:"授权后可以正常使用语音识别",success:function(t){t.confirm?(console.log("用户点击确定"),e.openSetting({success:function(e){console.log(e.authSetting)}})):t.cancel&&console.log("用户点击取消")}})}})},yuyinsorttip:function(){e.showToast({title:"长按录音,松开结束",icon:"none"})},longpresssort:function(){console.log("开始录音");var e=this;e.yuyinstart=!0,c.start({duration:6e4,sampleRate:16e3,numberOfChannels:1,frameSize:1024})},touchendsort:function(){console.log("结束"),this.yuyinstart=!1,c.stop()},voicelajifenlei:function(t){var n=this;console.log(t),e.showLoading({title:"语音识别中",mask:!0}),e.uploadFile({url:n.requesturl+"/txapi/voicelajifenlei/index",filePath:t,name:"say",formData:{key:n.key,format:"m4a"},success:function(t){var o=JSON.parse(t.data).newslist[0],i={name:o.name,type:o.lajitype,imgurl:"",lajitip:o.lajitip};n.SET_SHIBIE_OBJ(i),e.hideLoading(),e.navigateTo({url:"shibiepage/shibiepage"})}})}}),onLoad:function(){this.getHotsearch();var t=this;e.getSetting({success:function(e){console.log(e.authSetting),1==e.authSetting["scope.record"]?t.openrecordSet=!1:0==e.authSetting["scope.record"]&&(t.openrecordSet=!0)}}),c.onStop((function(e){console.log("获取录音文件");var n=e.tempFilePath;t.voicelajifenlei(n)}))},onShareAppMessage:function(e){return{title:"垃圾分类工具",path:"/pages/rubbishsort/rubbishsort"}}};t.default=u}).call(this,n("543d")["default"])},"60c7":function(e,t,n){"use strict";n.r(t);var o=n("b8c7"),i=n("9cfa");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("3574");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=c.exports},"9cfa":function(e,t,n){"use strict";n.r(t);var o=n("4bde"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},b8c7:function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}))},dbc8:function(e,t,n){}},[["3dfa","common/runtime","common/vendor"]]]);